{"version":3,"sources":["webpack:///./src/views/PayPal.vue","webpack:///./src/views/PayPal.vue?2e3f"],"names":["class","ref","data","loaded","paidFor","product","price","description","img","mounted","script","document","createElement","src","addEventListener","this","setLoaded","body","appendChild","cart","final_price","console","log","methods","window","paypal","Buttons","createOrder","actions","order","create","purchase_units","amount","currency_code","value","onApprove","capture","cartItems","related_items","map","item","height","width","length","bohrung","comment","qty_item","total_price","ausschnitt","id","armierung","result","$route","params","paypal_id","email","payer","email_address","first_name","name","given_name","last_name","surname","total_items","cart_items","res","$store","dispatch","isLoggedIn","$router","push","info","detail","onError","err","render","$refs","computed","__exports__"],"mappings":"0IACOA,MAAM,mB,GACLC,IAAI,U,gDADV,eAEM,MAFN,EAEM,CADL,eAAwB,MAAxB,EAAwB,Y,oHASZ,GACbC,KAAM,iBAAO,CACXC,QAAQ,EACRC,SAAS,EACTC,QAAS,CACPC,MAAO,OACPC,YAAa,+BACbC,IAAK,uBAGTC,QAVa,WAWX,IAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,IACL,2HACFH,EAAOI,iBAAiB,OAAQC,KAAKC,WACrCL,SAASM,KAAKC,YAAYR,GAC1BK,KAAKV,QAAQC,MAAQS,KAAKI,KAAKC,YAAc,EAAIL,KAAKI,KAAKC,YAAc,MACzEC,QAAQC,IAAIP,KAAKV,QAAQC,QAE3BiB,QAAS,CACPP,UAAW,WAAW,WACpBD,KAAKZ,QAAS,EACdqB,OAAOC,OACJC,QAAQ,CACPC,YAAa,SAACzB,EAAM0B,GAClB,OAAOA,EAAQC,MAAMC,OAAO,CAC1BC,eAAgB,CACd,CACExB,YAAa,EAAKF,QAAQE,YAC1ByB,OAAQ,CACNC,cAAe,MACfC,MAAO,EAAK7B,QAAQC,YAM9B6B,UAAW,WAAF,8CAAE,WAAOjC,EAAM0B,GAAb,6GACWA,EAAQC,MAAMO,UADzB,cACHP,EADG,OAET,EAAKzB,SAAU,EACXiC,EAAY,EAAKlB,KAAKmB,cAAcC,KAAI,SAAAC,GAAG,gBAC7CC,OAAQD,EAAKC,OACbC,MAAOF,EAAKE,MACZC,OAAQH,EAAKG,OACbC,QAASJ,EAAKI,QACdC,QAAS,oBACTC,SAAU,EACVC,YAAaP,EAAKO,YAClBC,WAAYR,EAAKQ,WACjBR,KAAMA,EAAKA,KAAKS,GAChBC,WAAW,GAVkC,8BAWjC,GAXiC,+BAYhC,GAZgC,mCAa7B,GAb6B,KAe3CC,EAlBK,iCAmBJ,EAAKC,OAAOC,QAnBR,IAoBPC,UAAWzB,EAAMoB,GACjBM,MAAO1B,EAAM2B,MAAMC,cACnBC,WAAY7B,EAAM2B,MAAMG,KAAKC,WAC7BC,UAAWhC,EAAM2B,MAAMG,KAAKG,QAC5BC,YAAa,EAAK5C,KAAK4C,YACvB3C,YAAa,EAAKD,KAAKC,YACvB4C,WAAY3B,IA1BL,kBA6BS,eAAYc,GA7BrB,OA6BHc,EA7BG,OA8BP,EAAKC,OAAOC,SAAS,aAClB,EAAKC,WACN,EAAKC,QAAQC,KAAK,YAElB,EAAKD,QAAQC,KAAK,CAACX,KAAM,SAAUN,OAAQ,CAACkB,KAAMN,EAAI/D,KAAKsE,UAlCtD,qDAqCPnD,QAAQC,IAAR,MArCO,QAuCTD,QAAQC,IAAIO,GAvCH,0DAAF,wDAAE,GAyCX4C,QAAS,SAAAC,GACPrD,QAAQC,IAAIoD,MAGfC,OAAO5D,KAAK6D,MAAMnD,UAGzBoD,SAAU,kBACL,eAAW,CAAC,OAAQ,iB,qBC5F3B,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASH,KAErD","file":"js/chunk-2d221dc3.69a0e5eb.js","sourcesContent":["<template>\r\n  <div class=\"paypal__wrapper\">\r\n   <div ref=\"paypal\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { paypalOrder } from '@/api/shop'\r\nimport {mapGetters} from \"vuex\"\r\n\r\n\r\nexport default {\r\n  data: () => ({\r\n    loaded: false,\r\n    paidFor: false,\r\n    product: {\r\n      price: 777999,\r\n      description: \"leg lamp from that one movie\",\r\n      img: \"./assets/lamp.jpg\"\r\n    }\r\n  }),\r\n  mounted(){\r\n    const script = document.createElement(\"script\");\r\n    script.src =\r\n      \"https://www.paypal.com/sdk/js?client-id=AbLwrgEaPeiIpwmFu6rP9rexynquY7H3KT8CrYV2bEejAfhK_q6o31viE4Zr2rtS2mRNe0DNpzvmj339\";\r\n    script.addEventListener(\"load\", this.setLoaded);\r\n    document.body.appendChild(script);\r\n    this.product.price = this.cart.final_price > 0 ? this.cart.final_price : '200'\r\n    console.log(this.product.price)\r\n  },\r\n  methods: {\r\n    setLoaded: function() {\r\n      this.loaded = true;\r\n      window.paypal\r\n        .Buttons({\r\n          createOrder: (data, actions) => {\r\n            return actions.order.create({\r\n              purchase_units: [\r\n                {\r\n                  description: this.product.description,\r\n                  amount: {\r\n                    currency_code: \"USD\",\r\n                    value: this.product.price\r\n                  }\r\n                }\r\n              ]\r\n            });\r\n          },\r\n          onApprove: async (data, actions) => {\r\n            const order = await actions.order.capture();\r\n            this.paidFor = true;\r\n            let cartItems = this.cart.related_items.map(item => ({\r\n              height: item.height,\r\n              width: item.width,\r\n              length: item.length,\r\n              bohrung: item.bohrung,\r\n              comment: '23312312321312312',\r\n              qty_item: 0,\r\n              total_price: item.total_price,\r\n              ausschnitt: item.ausschnitt,\r\n              item: item.item.id,\r\n              armierung: true,\r\n              ausschnitt: 0,\r\n              ausklinkung: 0,\r\n              polierte_kante: true\r\n            }))\r\n            let result = {\r\n              ...this.$route.params,\r\n              paypal_id: order.id,\r\n              email: order.payer.email_address,\r\n              first_name: order.payer.name.given_name,\r\n              last_name: order.payer.name.surname,\r\n              total_items: this.cart.total_items,\r\n              final_price: this.cart.final_price,\r\n              cart_items: cartItems,\r\n            }\r\n            try{ \r\n              let res = await paypalOrder(result)\r\n              this.$store.dispatch('clearCart')\r\n              if(this.isLoggedIn){\r\n                this.$router.push('/profile')\r\n              }else{ \r\n                this.$router.push({name: 'Thanks', params: {info: res.data.detail}})       \r\n              }\r\n            }catch(err){\r\n              console.log(err)\r\n            }\r\n            console.log(order);\r\n          },\r\n          onError: err => {\r\n            console.log(err);\r\n          }\r\n        })\r\n        .render(this.$refs.paypal);\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['cart', 'isLoggedIn'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./PayPal.vue?vue&type=template&id=5f4c34ad\"\nimport script from \"./PayPal.vue?vue&type=script&lang=js\"\nexport * from \"./PayPal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\stonebackend\\\\stone_backend\\\\frontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}